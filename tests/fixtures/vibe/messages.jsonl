{"role":"user","content":"Create a simple HTTP server in Go","timestamp":"2025-01-27T03:30:00.000Z"}
{"role":"assistant","content":"Here's a minimal Go HTTP server:\n\n```go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"net/http\"\n)\n\nfunc main() {\n\thttp.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n\t\tfmt.Fprintf(w, \"Hello, World!\")\n\t})\n\thttp.ListenAndServe(\":8080\", nil)\n}\n```","timestamp":"2025-01-27T03:30:06.000Z"}
{"role":"user","content":"Add graceful shutdown","timestamp":"2025-01-27T03:31:00.000Z"}
{"role":"assistant","content":"To add graceful shutdown, use `http.Server` with a context and signal handling:\n\n```go\npackage main\n\nimport (\n\t\"context\"\n\t\"log\"\n\t\"net/http\"\n\t\"os\"\n\t\"os/signal\"\n\t\"syscall\"\n\t\"time\"\n)\n\nfunc main() {\n\tsrv := &http.Server{Addr: \":8080\"}\n\tgo func() {\n\t\tif err := srv.ListenAndServe(); err != http.ErrServerClosed {\n\t\t\tlog.Fatal(err)\n\t\t}\n\t}()\n\tquit := make(chan os.Signal, 1)\n\tsignal.Notify(quit, syscall.SIGINT, syscall.SIGTERM)\n\t<-quit\n\tctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n\tdefer cancel()\n\tsrv.Shutdown(ctx)\n}\n```","timestamp":"2025-01-27T03:31:10.000Z"}
